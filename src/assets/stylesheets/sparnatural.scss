@use './mixins';
@use './base';
@use './layout/all-layout.scss';
@use './components/all-components.scss';
@import "nice-select.css";
@import "~easy-autocomplete/dist/easy-autocomplete.css";
@import "~@chenfengyuan/datepicker/dist/datepicker.min.css";

@import "themes.scss";






/*New component Arrow */
.CriteriaGroup {
	.componentBackArrow svg {
		height: 48px;
		path {
			fill:transparent;
			stroke:transparent;
			stroke-width: 2.5px;
		}
	}
	.componentFrontArrow svg{
		height: 48px;
		path {
			fill:transparent;
			stroke: $custom-silver-light;
			stroke-width: 3px;
		}
		rect {
			fill:#fff;
		}
	}
}

	/*Completed criteria*/
.componentsListe li>.CriteriaGroup.OptionMenuShowed {
	&>.StartClassGroup .componentFrontArrow {
		display: none;
	}

}
.componentsListe li.completed>.CriteriaGroup.OptionMenuShowed {
	&>.StartClassGroup .Highlited .componentFrontArrow {
		display: block;
	}

}
.componentsListe li.completed>.CriteriaGroup {
	&>.StartClassGroup>.Highlited {
		@include mixins.arrow-front-colors($custom-red, #fff);
	}
	&>.StartClassGroup.VariableSelected>.Highlited {
		@include mixins.arrow-front-colors($custom-red, $custom-green-bold);
	}

	
	&>.ObjectPropertyGroup>.ObjectPropertyTypeId {
		@include mixins.arrow-back-colors(transparent, #fff);
		.componentFrontArrow {
			display: none;
		}
		@include mixins.arrow-front-colors(transparent, #fff);
	}
	&>.EndClassGroup>.Highlited {
		@include mixins.arrow-back-colors($custom-red, #fff);
		@include mixins.arrow-front-colors($custom-red, #fff);
	}
	&>.EndClassGroup.VariableSelected>.Highlited {
		@include mixins.arrow-back-colors($custom-red, $custom-green-bold);
		@include mixins.arrow-front-colors($custom-red, $custom-green-bold);
		.componentBackArrow svg {
			path {
				stroke-width: 3px;
			}
		}
	}

	&>.EndClassWidgetGroup {
		.EndClassWidgetAddOrValue,
		.EndClassWidgetValue {
			@include mixins.arrow-back-colors($custom-red-medium, #fff);
			@include mixins.arrow-front-colors($custom-red-medium, #fff);
		}
	}
}



spar-natural {
	section {
		padding-top: 30px;
	}

	li.completed {
		&>.CriteriaGroup {
			margin-bottom: base.$margin-component;
			&.onAddOrValue {
				margin-bottom: base.$margin-component-onEdit/2 + 10;
			}
		}
	}


		&.onAddOrValue {
			margin-bottom: base.$margin-component-onEdit/2;
		}


		.EndClassGroup.IsOnEdit>span.unselect {
			display: none;
		}
		/*Hide select widget list arrow*/
		.nice-select.disabled:after {
			display: none;
		}
		.nice-select {
			border: base.$center-arrow-bd-width solid #fff;
			border-left: 0;
			border-right: 0;
		}
		.nice-select .current {
			display: inline-block;
			height: base.$height-components-under - (base.$center-arrow-bd-width*2);
			line-height: base.$height-components-under - (base.$center-arrow-bd-width*2);
			vertical-align: bottom;
			span  {
				display: inline-block;
				vertical-align: bottom;
			}
			.selectIcon {
				float: left;
				width: 26px;
				text-align: center;
				margin-left: 5px;

			}
			.variableName {
				display: none;
			}
		}
		

		.EndClassWidgetGroup {
			width: auto;
			padding: 1px 15px 1px 0;
			margin-left: -17px;
			display: flex;
			
			-ms-flex-align: center;
			-webkit-align-items: center;
			-webkit-box-align: center;
			align-items: center;
	
			.easy-autocomplete {
				width: 100%!important;
			}
			input {
				width: 100%!important;
				display: block;
			}
			.EndClassWidgetAddOrValue,
			.EndClassWidgetValue {
				position: relative;
				/*line-height: 0;*/
				color: #fff;
				font-size: 14px;
				/*display: inline-block;*/
				padding: 0;
				span {
					/*line-height: base.$height-components-under;*/
					display: inline-block;
					vertical-align: middle;
					margin: 0;
				}
				span.label-two-line {
					line-height: base.$height-components-under / 2;
					line-height: 21px;
				}
				
			}
			.EndClassWidgetAddOrValue {
				color: #fff;
				/*margin-left: 15px;*/
				/*line-height: 48px;
				height: 48px;*/
				font-size: 20px;
				cursor: pointer;
				vertical-align: middle;
				p {
					width: 0;
					padding: 0;
					position: relative;
					height: 42px;
					line-height: 42px;
					overflow: visible;
					span {
						line-height: 32px;
						width: auto;
						/*vertical-align: baseline;
						display: inline-block;
						height: 48px;*/
					}
				}
			}
			span.unselect {
				top: -11px;
			}
			
		}
		
		.ActionsGroup {
			position: absolute;
			display: block;
			top: 100%;
			left: 0;
			width: 100%;
			height: 46px;
			padding: 0;
			background: transparent;
			z-index: 100;
			
			&>div {
				position: absolute;
			}
			.ActionRemove {
				right: 0;
				top: -46px;
				line-height: 46px;
				a {
					cursor: pointer;
					display: inline-block;line-height: 46px;
					vertical-align: top;
					padding: 0 15px;
					height: 46px;

					.unselect {
						position: relative;
						top: 0;
						line-height: 46px;
					}
				}
			}
			.ActionAnd {
				left: (base.$margin-children-li - 45) /2;
				top: base.$margin-component / 2;
				line-height: 46px;
				/*width: 46px;*/
				text-align: center;
			}
			
		}
		&.completed {
			
			
		}
		

	.componentsListe.displayVarName .CriteriaGroup {
		&>.StartClassGroup>.ClassTypeId,
		&>.EndClassGroup>.ClassTypeId {
			.nice-select .current {
				.label {
					display: none;
				}
				.variableName {
					display: inline;
				}
			}
		}
	}
	// N'est plus Ã  cacher, lutilisateur peut choisi d'afficher les valeurs
	/*li.hideEndClassProperty {
		&>div>.EndClassGroup {
			&>.unselect,
			&>.ClassTypeId {
				display: none;
			}
		}
	}*/
	
	.hasWhereChild {
		position: relative;
		&>.link-where-bottom {
			position: absolute;
			left: 200px;
			top: base.$height-components + base.$margin-component ;
			height: base.$margin-component + 1;
			border-left: 3px solid $custom-red;
			display: block;
		}
		&.optionalEnabledcompleted ul.childsList>li.hasWhereChild>.link-where-bottom,
		&.optionalEnabled.completed>.link-where-bottom {
			border-left: 3px dashed $custom-red;
		}
		&.notExists-enabled.completed ul.childsList>li.hasWhereChild>.link-where-bottom,
		&.notExists-enabled.completed>.link-where-bottom {
			border-left: 3px dotted #000;
		}
		
		&>.CriteriaGroup {
			
			.EndClassGroup .ObjectPropertyTypeWidget {
				display: none;
			}
			
			&>div.EndClassGroup span.unselect {
				right: 13px;
			}
		}
		&>ul {
			position: relative;
			&>.lien-top {
				position: absolute;
				top: -2px;
				left: 111px;
				border-left: 3px solid $custom-red;
				border-top: 3px solid $custom-red;
				width: attr(data-before-width)px ;
				height: 36px;
				display: block;
				&>span {
					position: absolute;
					top: -17px;
					left: -2px;;
					display: block;
					background: #fff;
					border: 2px solid $custom-red ;
					border-radius: 15px;
					height: 30px;
					line-height: 20px;
					padding: 2px 10px;
					width: auto;
					transform: translateX(-50%);
				}
			}
		}
		&.optionalEnabled {
			ul.childsList {
				&>.lien-top {
					border-left: 3px dashed $custom-red;
					border-top: 3px dashed $custom-red;
					&>span {
						border: 2px dashed $custom-red ;
						border-radius: 15px;
					}
				}
			}
		}
		&.notExists-enabled {
			ul.childsList {
				&>.lien-top {
					border-left: 3px dotted #000;
					border-top: 3px dotted #000;
					&>span {
						border: 2px dotted #000;
						border-radius: 15px;
					}
				}
			}
		}
	}
	.Sparnatural {
		width:100%;

	li li.OnEdit>div>div> .ActionWhere.ShowOnEdit {
		display: none;
	}
	li.groupe.optionalEnabled {
		.CriteriaGroup {
			border: 3px dashed $custom-red ;
		}
		ul.childsList {
			.ActionAnd {
				&>.trait-and-bottom {
					border-left: 3px dashed $custom-red ;
				}
				&>a {
					border: 2px dashed $custom-red ;
				}
			}
			&>li.hasAnd {
				&>span {
					border-left: 3px dashed $custom-red ;
				}
				&>span>span  {
					border: 2px dashed $custom-red ;
				}
			}
		} 
	}
	li.groupe.notExistsEnabled {
		.CriteriaGroup {
			border: 3px dotted #000 ;
		}
		ul.childsList {
			.ActionAnd {
				&>.trait-and-bottom {
					border-left: 3px dotted #000 ;
				}
				&>a {
					border: 2px dotted #000 ;
				}
			}
			&>li.hasAnd {
				&>span {
					border-left: 3px dotted #000 ;
				}
				&>span>span  {
					border: 2px dotted #000 ;
				}
			}
		} 
	}


	
		.ActionWhere {
			display: inline-block;
		}
		.ActionAnd {
			.trait-and-bottom {
				position: absolute;
				top: -14px;
				left: 50%;
				border-left: 3px solid $custom-red ;
				margin-left: -1px;
				height: 15px;
				
			}
			a {
				cursor: pointer;
				display: block;
				background: #fff;
				border: 2px solid $custom-red ;
				border-radius: 15px;
				height: 30px;
				line-height: 20px;
				padding: 2px 10px;
				width: auto;
				text-align: center;
				
				&:hover {
					color: $custom-red ;
				}
			}
		}
		.ActionWhere a {
			cursor: pointer;
			display: block;
			background: #fff;
			border: 2px solid $custom-red ;
			border-radius: 13px;
			height: 26px;
			line-height: 20px;
			min-width: 26px;
			text-align: center;
			font-size: 18px;
			color: $custom-red ;
			font-weight: bold;
			padding: 0;
			
			&:hover {
				color: $custom-red ;
			}
		}
		
		&>div>div>.ShowOnHover {
			display: none;
		}
		&.OnHover>div>div.ActionsGroup>.ShowOnHover,
		&.OnHover>div>div.HasInputsCompleted>.ShowOnHover {
			display: block;
		}

		&>div>div>.ShowOnEdit {
			display: none;
		}

		&>div>div>.ShowOnEdit.Disabled,
		&>div>div>.ShowOnEdit.Enabled {
			display: inline-block;
		}
		&.OnEdit>div>div.ActionsGroup>.ShowOnEdit,
		&.OnEdit>div>div.HasInputsCompleted>.ShowOnEdit {
			display: block;
		}

		li.addWhereDisable .ActionWhere.ShowOnEdit,
		&.WhereImpossible.OnEdit>div .ActionWhere.ShowOnEdit,
		&.OnEdit>div.completed>div .ActionWhere.ShowOnEdit {
			display: none;
		}
		&.addWhereDisable>div .ObjectPropertyTypeWidget,
		&.WhereImpossible>div .ObjectPropertyTypeWidget {
			border-left-color: transparent;

			.edit-trait-top {
				display: block;
			}
		}
		&.addWhereEnable>.link-where-bottom,
		&.addWhereDisable>.link-where-bottom {
			display: none;
		}
		&.addWhereEnable.hasWhereChild>.link-where-bottom {
			display: block;
		}
		.easy-autocomplete {
			input {
				height: base.$height-components-hover;
				box-sizing: border-box;
			}
		}
		.easy-autocomplete-container {
			z-index: 999;
			ul {
				line-height: 20px;
				background: #fff;
				li {
					padding: 5px;
					&.selected {
						
						background: $custom-red ;
					}
				}
			}
		}
		&.WhereImpossible.completed {
			&>div .EndClassWidgetAddOrValue,
			&>div .EndClassWidgetValue {
				max-width: 220px;
				height: 48px;
				/*overflow: hidden;*/
				/*padding-right: 15px;*/
				margin-right: -13px;
				/*display: block;*/
				
				/*@include triangle-before();
				@include triangle-after();*/
				/*span {
					background: $custom-red-light ;
					height: 48px;
					background-clip: padding-box;
					
				}*/
				p {
					line-height: 48px;
					height: 48px;
					/*width: calc(100% - 15px);*/
					background: $custom-red-medium;
					background-clip: padding-box;
					margin: 0;
					padding: 0 0 0 5px;
					display: inline-block;
					overflow: hidden;
					/*text-overflow: ellipsis;*/
					border: base.$center-arrow-bd-width solid #fff;
					border-left: 0;
					border-right: 0;
					
					text-align: center;
					span {
						line-height: 42px;
						display: inline-block;
						vertical-align: baseline;
						overflow: hidden;
						text-overflow: ellipsis;
						white-space: nowrap;
						color: $default-text-color;
						width: 100%;
					}
				}
			}
			&>div .EndClassWidgetAddOrValue {
				p {
					width: 0;
					padding: 0;
					position: relative;
					height: 48px;
					line-height: 48px;
					overflow: visible;
					span {
						line-height: 42px;
						width: auto;
						text-indent: 1px;
						/*vertical-align: baseline;
						display: inline-block;
						height: 48px;*/
					}
				}
			}
			
		}
		
		.nice-select {
			background: transparent;
			border-color: transparent;
			padding-left: 10px;
			padding-right: 26px;
			ul.list li {
				border-bottom: solid 1px #e8e8e8;
				img {
					height : 40px;
					&.highlited {
						display: none;
					}
				}
				&.selected,
				&.focus,
				&:hover {
					background: $custom-red ;
					color: #fff;
					img {
						display: none;
						&.highlited {
							display: inline;
						}
					}
				}
			}
			ul.list {
				background: #fff;
				top: 0;
				margin-top: 0;
				max-height: 450px;
				overflow-y: auto;
			}
			ul.list:hover .option:not(:hover) {
				color: #000;
				img {
					display: inline;
					
					&.highlited {
						display: none;
					}
				}
			}
			.current {
				img {
					height: 40px;
					&.highlited {
						display: none;
					}
				}
			}
			&:after {
				margin-top: 0;
			}
		}
		.nice-select.disabled {
			color: $default-text-color;
			border-color: transparent;
			border-radius: 0;
		}
		.StartClassGroup>.ClassTypeId .nice-select.disabled {
			border-radius: 5px 0 0 5px;
		}
		
		&.completed {
			&>div .Highlited {
				/*background: $custom-red;*/
				/*margin-right: 23px;*/
				
				.nice-select {
						background: $custom-red;
						background-clip: padding-box;
						border-color: transparent;
						color: #fff;
						height: base.$height-components-under;
						line-height: base.$height-components-under - (base.$center-arrow-bd-width*2);
						.current {
							img {
								display: none;
								&.highlited {
									display: inline;
								}
							}
						}
					}
					.nice-select.disabled {
						color: #fff;
						border-color: transparent;
					}
			}
			&>div>.StartClassGroup.VariableSelected .Highlited {
				.nice-select.disabled {
					border-left: 3px solid $custom-green-bold;
				}
			}
			&>div>.StartClassGroup.VariableSelected .Highlited,
			&>div>.EndClassGroup.VariableSelected .Highlited {
				.nice-select.disabled {
					border-color: $custom-green-bold;
				}
			}
			&>.CriteriaGroup>.ObjectPropertyGroup>.ObjectPropertyTypeId .nice-select.disabled {
				padding-right: 26px;
			}

			&>div .Highlited {
				position: relative;
				/*@include mixins.arrow-block($custom-red);*/
				&:before {
					
				}
			}
			/*&>div>.StartClassGroup .Highlited:before{
				display: none;
			}*/
			&>div .StartClassGroup,
			&>div .EndClassGroup {
				margin-left: -8px;
				&>.selectViewVariable {
					display: block;
					right: 18px; //+10 pour retrait dans fleche
					svg {
						stroke: #fff;
					}
				}
			}
			&>div .EndClassGroup .Highlited:before{
				/*content: '';
				width: 0;
				height: 0;
				line-height: 0;
				padding: 0;
				display: inline-block;float:left;
				border-style: solid;
				border-width: 21px 0 21px 15px;
				border-color: transparent transparent transparent #fff;*/
			}
			&>div>div .EditComponents {
				.ActionWhere,
				.ObjectPropertyTypeWidget {
					display: none;
				}
			}
			&>div>div .EditComponents.newOr {
				.ObjectPropertyTypeWidget {
					display: block;
				}
			}
			&.WhereImpossible {
				
				&>div .EndClassGroup .Highlited {
					/*background: transparent;
					color: #888;
					margin-right: 0;*/
					
					/*&:before,
					&:after {
						display: none;
					}*/
					.current {
						/*color: #888;*/
						img {
							display: inline;
							&.highlited {
								display: none;
							}
						}
					}
				}
				
			}
		
		}

	li.groupe.hasAnd {
		position: relative;
		&>.link-and-bottom {
			display: block;
			position: absolute;
			left: 36px;
			top: base.$height-components / 2 + base.$margin-component;
			border-left: 3px solid $custom-red;
			
			span {
				position: absolute;
				top: 50%;
				left: -2px;
				display: block;
				background: #fff;
				border: 2px solid $custom-red ;
				border-radius: 15px;
				height: 30px;
				line-height: 20px;
				padding: 2px 10px;
				width: auto;
				transform: translate(-50%, -50%);
			}
		}
		&.OnEdit > div > div > .ShowOnHover.ActionAnd {
			display: none;
		}
	}
	}

}

.Invisible {
	display: none;
}

//Select2 overides
body .select2-container--default {
	font-size: 14px;
	line-height: 1.2;
	.select2-results__option--highlighted.select2-results__option--highlighted {
		background-color: $custom-red;
	}
}
//tippy overides
.tippy-box[data-theme~='sparnatural'] {
    background-color: $custom-red-light;
    color: #000;
	border-radius: 5px;
	border: 1px dashed $custom-red;
	padding: 2px;
	font-size:0.75em;
  }